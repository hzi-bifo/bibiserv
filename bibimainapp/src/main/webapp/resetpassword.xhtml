<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.

Copyright 2010-2015 BiBiServ Curator Team, http://bibiserv.cebitec.uni-bielefeld.de,
All rights reserved.

The contents of this file are subject to the terms of the Common
Development and Distribution License("CDDL") (the "License"). You
may not use this file except in compliance with the License. You can
obtain a copy of the License at http://www.sun.com/cddl/cddl.html

See the License for the specific language governing permissions and
limitations under the License.  When distributing the software, include
this License Header Notice in each file.  If applicable, add the following
below the License Header, with the fields enclosed by brackets [] replaced
 by your own identifying information:

"Portions Copyrighted 2010-2015 BiBiServ Curator Team"

Contributor(s): Jan Krueger - jkrueger(at)cebitec.uni-bielefeld.de

-->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:s="http://java.sun.com/jstl/fmt"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                template="WEB-INF/templates/bibiserv2Tpl.xhtml">

    <ui:define name="headContentTitle">
        Reset Password
    </ui:define>

    <ui:define name="north">
        <h:outputText escape="false"  styleClass="title" value="Reset Password"/>
        <div class="separator"/>
    </ui:define>

    <ui:define name="center">
        <h:form>
            <p:growl id="global" showDetail="true" />
            
            <h:panelGroup  rendered="#{resetpassword.accesskey == null or resetpassword.id == null}">
                <strong>Invalid or unknown access key!</strong>
                <p>
                    Go to <a href="/forgotpassword.jsf"> Forgot Password </a> page / <a href="/login.jsf">Login</a> / <a href="/">Main</a> page.
                </p>     
            </h:panelGroup>



            <h:panelGroup rendered="#{resetpassword.accesskey != null  and resetpassword.id != null}"> 
                <h:panelGroup rendered="#{!resetpassword.passwordchanged}">
                    <h:panelGrid  columns="1">
                        Please enter a new password !

                        <h:panelGrid columns="2">
                            <h:outputText value="AccessKey"/> 
                            <p:inputText size="40" id="id" value="#{resetpassword.accesskey}" disabled="true"/> 




                            <h:outputText value="Password:"/>
                            <h:panelGrid columns="1">
                                <p:password size="40" id="password" value="#{resetpassword.password}"  required="true" feedback="true" /> 
                                <p:message id="passwordmsg" for="password" />
                            </h:panelGrid>

                            <h:outputText value="Confirm Password "/> 
                            <h:panelGrid columns="1">
                                <p:password size="40" id="confirmpassword"  value="#{resetpassword.confirmPassword}" requiredMessage="Confirm password!" required="true" feedback="false"/> 
                                <p:message id="confirmpasswordmsg" for="confirmpassword" />
                            </h:panelGrid>
                        </h:panelGrid>

                        <h:panelGrid columns="2">
                            <p:commandButton value="Change Password" action="#{resetpassword.changePWDAction}" update="@form" />
                            <p:commandButton value="Cancel" type="reset"/> 
                        </h:panelGrid>


                    </h:panelGrid>
                </h:panelGroup>
                <h:panelGroup  rendered="#{resetpassword.passwordchanged}">
                    <strong>Password successful changed!</strong><br/>
                    <p>Go to <a href="/login.jsf"> Login</a> page / <a href="/">Main</a> page.
                    </p>
                </h:panelGroup>
            </h:panelGroup>

        </h:form>

    </ui:define>


</ui:composition>